x="Tiempo",
y = "Número de trabajadores",
caption = "Fuente: Elaboración propia en base a OHL (2010-2018)") + theme(legend.position="bottom") +
scale_color_manual(name="Legalidad de la huelga",values = c("1"="#e42829","2"="#0c4b8f"),
labels = c("Legal","Extralegal"))
ohl$sector
ohl %>% (!is.na(sector))
library(dplyr)
ohl %>% (!is.na(sector)) %>%
subset(sector %in% c("A Agriculture",
"B Mining",
"P Education (private, public and municipalized)",
"Q Health (private, public and municipalized)",
"Q Social and Personal Services")) %>%
ggplot(aes( x = yr, y =tc, fill = leg, color = leg)) + facet_wrap(~sector) +
geom_line() + theme_bw() +
scale_y_continuous(labels=function(x) format(x, big.mark = ".", scientific = FALSE))+
labs(title = "Número de trabajadores en huelgas en Chile (1980-2018) según sector económico y legalidad",
subtitle = "Solo agricultura, minería, educación, salud y servicios sociales",
x="Tiempo",
y = "Número de trabajadores",
caption = "Fuente: Elaboración propia en base a OHL (2010-2018)") + theme(legend.position="bottom") +
scale_color_manual(name="Legalidad de la huelga",values = c("1"="#e42829","2"="#0c4b8f"),
labels = c("Legal","Extralegal"))
ohl %>% filter(!is.na(sector), sector %in% c("A Agriculture",
"B Mining",
"P Education (private, public and municipalized)",
"Q Health (private, public and municipalized)",
"Q Social and Personal Services")) %>%
ggplot(aes( x = yr, y =tc, fill = leg, color = leg)) + facet_wrap(~sector) +
geom_line() + theme_bw() +
scale_y_continuous(labels=function(x) format(x, big.mark = ".", scientific = FALSE))+
labs(title = "Número de trabajadores en huelgas en Chile (1980-2018) según sector económico y legalidad",
subtitle = "Solo agricultura, minería, educación, salud y servicios sociales",
x="Tiempo",
y = "Número de trabajadores",
caption = "Fuente: Elaboración propia en base a OHL (2010-2018)") + theme(legend.position="bottom") +
scale_color_manual(name="Legalidad de la huelga",values = c("1"="#e42829","2"="#0c4b8f"),
labels = c("Legal","Extralegal"))
names(ohl)
ohl %>% filter(!is.na(sector), sector %in% c("A Agriculture",
"B Mining",
"P Education (private, public and municipalized)",
"Q Health (private, public and municipalized)",
"Q Social and Personal Services")) %>%
group_by(sector, yr, leg) %>%
summarise(dhtp = sum(dhtp, na.rm = T)) %>%
ggplot(aes( x = yr, y =dhtp, fill = leg, color = leg)) +
facet_wrap(~ sector) +
geom_line() +
scale_y_continuous(labels=function(x) format(x, big.mark = ".", scientific = FALSE)) +
labs(title = "Worker-lost day by sector and legality(1980-2018)",
subtitle = "Solo agricultura, minería, educación, salud y servicios sociales",
x="Year",
y = "Worker-lost day",
caption = "") + theme(legend.position="bottom") +
scale_color_manual(name="Legalidad de la huelga",values = c("1"="#e42829","2"="#0c4b8f"),
labels = c("Legal","Extralegal"))
ohl %>% filter(!is.na(sector), sector %in% c("A Agriculture",
"B Mining",
"P Education (private, public and municipalized)",
"Q Health (private, public and municipalized)",
"Q Social and Personal Services")) %>%
group_by(sector,leg, yr) %>%
summarise(dhtp = sum(dhtp, na.rm = T))
str(ohl$dhtp)
(ohl$dhtp) <- as.numeric((ohl$dhtp))
ohl$dhtp <- as.numeric(ohl$dhtp)
ohl %>% filter(!is.na(sector), sector %in% c("A Agriculture",
"B Mining",
"P Education (private, public and municipalized)",
"Q Health (private, public and municipalized)",
"Q Social and Personal Services")) %>%
group_by(sector,leg, yr) %>%
summarise(dhtp = sum(dhtp, na.rm = T)) %>%
ggplot(aes( x = yr, y =dhtp, fill = leg, color = leg)) +
facet_wrap(~ sector) +
geom_line() +
scale_y_continuous(labels=function(x) format(x, big.mark = ".", scientific = FALSE)) +
labs(title = "Worker-lost day by sector and legality(1980-2018)",
subtitle = "Solo agricultura, minería, educación, salud y servicios sociales",
x="Year",
y = "Worker-lost day",
caption = "") + theme(legend.position="bottom") +
scale_color_manual(name="Legalidad de la huelga",values = c("1"="#e42829","2"="#0c4b8f"),
labels = c("Legal","Extralegal"))
table(ohl$sector)
# worker-lostday ----------------------------------------------------------
theme_set(theme_classic())
# Tradicional -----------
ohl %>% filter(!is.na(sector), sector %in% c("A Agriculture",
"B Mining",
"C Manufacturing industry",
"D-E Electricity, Water and Sanitary Services",
"F Construction")) %>%
group_by(sector,leg, yr) %>%
summarise(dhtp = sum(dhtp, na.rm = T)) %>%
ggplot(aes( x = yr, y =dhtp, fill = leg, color = leg)) +
facet_wrap(~ sector) +
geom_line() +
scale_y_continuous(labels=function(x) format(x, big.mark = ".", scientific = FALSE)) +
labs(title = "Worker-lost day strike by sector and legality(1980-2018)",
subtitle = "Solo agricultura, minería, educación, salud y servicios sociales",
x="Year",
y = "Worker-lost day strike",
caption = "") + theme(legend.position="bottom") +
scale_color_manual(name="",values = c("1"="#e42829","2"="#0c4b8f"),
labels = c("Legal","Extralegal"))
# Tradicional -----------
ohl %>% filter(!is.na(sector), sector %in% c("A Agriculture",
"B Mining",
"C Manufacturing industry",
"D-E Electricity, Water and Sanitary Services",
"F Construction")) %>%
group_by(sector,leg, yr) %>%
summarise(dhtp = sum(dhtp, na.rm = T)) %>%
ggplot(aes( x = yr, y =dhtp, fill = leg, color = leg)) +
facet_wrap(~ sector) +
geom_line() +
scale_y_continuous(labels=function(x) format(x, big.mark = ".", scientific = FALSE)) +
labs(title = "Worker-lost day strike by sector and legality (1980-2018)",
x="Year",
y = "Worker-lost day strike",
caption = "") + theme(legend.position="bottom") +
scale_color_manual(name="",values = c("1"="#e42829","2"="#0c4b8f"),
labels = c("Legal","Extralegal"))
table(ohl$sector)
# Tradicional -----------
ohl %>% filter(!is.na(sector), sector %in% c("A Agriculture",
"B Mining",
"C Manufacturing industry",
"D-E Electricity, Water and Sanitary Services",
"F Construction",
"H-J Transportation and Communication")) %>%
group_by(sector,leg, yr) %>%
summarise(dhtp = sum(dhtp, na.rm = T)) %>%
ggplot(aes( x = yr, y =dhtp, fill = leg, color = leg)) +
facet_wrap(~ sector) +
geom_line()  +
labs(title = "Worker-lost day strike by sector and legality (1980-2018)",
x="Year",
y = "Worker-lost day strike",
caption = "") + theme(legend.position="bottom") +
scale_color_manual(name="",values = c("1"="#e42829","2"="#0c4b8f"),
labels = c("Legal","Extralegal"))
# Tradicional -----------
ohl %>% filter(!is.na(sector), sector %in% c("A Agriculture",
"B Mining",
"C Manufacturing industry",
"D-E Electricity, Water and Sanitary Services",
"F Construction",
"H-J Transportation and Communication")) %>%
group_by(sector,leg, yr) %>%
summarise(dhtp = sum(dhtp, na.rm = T)) %>%
ggplot(aes( x = yr, y =dhtp, fill = leg, color = leg)) +
facet_wrap(~ sector) +
geom_line(size = 1)  +
labs(title = "Worker-lost day strike by sector and legality (1980-2018)",
x="Year",
y = "Worker-lost day strike",
caption = "") + theme(legend.position="bottom") +
scale_color_manual(name="",values = c("1"="#e42829","2"="#0c4b8f"),
labels = c("Legal","Extralegal"))
ohl %>% filter(!is.na(sector), sector %in% c("G-I Commerce",
"L-K Banks and Financial Services",
"N Activities of administrative and support services",
"P Education (private, public and municipalized)",
"Q Health (private, public and municipalized)",
"Q Social and Personal Services")) %>%
group_by(sector,leg, yr) %>%
summarise(dhtp = sum(dhtp, na.rm = T)) %>%
ggplot(aes( x = yr, y =dhtp, fill = leg, color = leg)) +
facet_wrap(~ sector) +
geom_line()  +
labs(title = "Worker-lost day strike by sector and legality (1980-2018)",
x="Year",
y = "Worker-lost day strike",
caption = "") + theme(legend.position="bottom") +
scale_color_manual(name="",values = c("1"="#e42829","2"="#0c4b8f"),
labels = c("Legal","Extralegal"))
ohl %>% filter(!is.na(sector), sector %in% c("G-I Commerce",
"L-K Banks and Financial Services",
"N Activities of administrative and support services",
"P Education (private, public and municipalized)",
"Q Health (private, public and municipalized)",
"Q Social and Personal Services")) %>%
group_by(sector,leg, yr) %>%
summarise(dhtp = sum(dhtp, na.rm = T)) %>%
ggplot(aes(x = yr, y =dhtp, fill = leg, color = leg)) +
facet_wrap(~ sector) +
geom_line()  +
labs(title = "Worker-lost day strike by sector and legality (1980-2018)",
x="Year",
y = "Worker-lost day strike",
caption = "") + theme(legend.position="bottom") +
scale_color_manual(name="",values = c("1"="#e42829","2"="#0c4b8f"),
labels = c("Legal","Extralegal"))
ohl %>% filter(!is.na(sector), sector %in% c("G-I Commerce",
"L-K Banks and Financial Services",
"M Professional, scientific and technical activities",
"N Activities of administrative and support services",
"P Education (private, public and municipalized)",
"Q Health (private, public and municipalized)")) %>%
group_by(sector,leg, yr) %>%
summarise(dhtp = sum(dhtp, na.rm = T)) %>%
ggplot(aes( x = yr, y =dhtp, fill = leg, color = leg)) +
facet_wrap(~ sector) +
geom_line()  +
labs(title = "Worker-lost day strike by sector and legality (1980-2018)",
x="Year",
y = "Worker-lost day strike",
caption = "") + theme(legend.position="bottom") +
scale_color_manual(name="",values = c("1"="#e42829","2"="#0c4b8f"),
labels = c("Legal","Extralegal"))
table(ohl$sector)
ohl %>% filter(!is.na(sector), sector %in% c("G-I Commerce",
"L-K Banks and Financial Services",
"M Professional, scientific and technical activities",
"N Activities of administrative and support services",
"Q Health (private, public and municipalized)",
"Q Social and Personal Services")) %>%
group_by(sector,leg, yr) %>%
summarise(dhtp = sum(dhtp, na.rm = T)) %>%
ggplot(aes( x = yr, y =dhtp, fill = leg, color = leg)) +
facet_wrap(~ sector) +
geom_line()  +
labs(title = "Worker-lost day strike by sector and legality (1980-2018)",
x="Year",
y = "Worker-lost day strike",
caption = "") + theme(legend.position="bottom") +
scale_color_manual(name="",values = c("1"="#e42829","2"="#0c4b8f"),
labels = c("Legal","Extralegal"))
# Services --------------
# N y M sin n
ohl %>% filter(!is.na(sector), sector %in% c("G-I Commerce",
"L-K Banks and Financial Services",
"Q Health (private, public and municipalized)",
"Q Social and Personal Services")) %>%
group_by(sector,leg, yr) %>%
summarise(dhtp = sum(dhtp, na.rm = T)) %>%
ggplot(aes( x = yr, y =dhtp, fill = leg, color = leg)) +
facet_wrap(~ sector) +
geom_line()  +
labs(title = "Worker-lost day strike by sector and legality (1980-2018)",
x="Year",
y = "Worker-lost day strike",
caption = "") + theme(legend.position="bottom") +
scale_color_manual(name="",values = c("1"="#e42829","2"="#0c4b8f"),
labels = c("Legal","Extralegal"))
# worker-lostday ----------------------------------------------------------
theme_set(theme_classic() + theme(axis.text = element_text(size = 15), axis.ticks = element_text(size= 15)))
# worker-lostday ----------------------------------------------------------
theme_set(theme(axis.text = element_text(size = 15),
axis.ticks = element_text(size= 15)) +
theme_classic())
# Tradicional -----------
ohl %>% filter(!is.na(sector), sector %in% c("A Agriculture",
"B Mining",
"C Manufacturing industry",
"D-E Electricity, Water and Sanitary Services",
"F Construction",
"H-J Transportation and Communication")) %>%
group_by(sector,leg, yr) %>%
summarise(dhtp = sum(dhtp, na.rm = T)) %>%
ggplot(aes( x = yr, y =dhtp, fill = leg, color = leg)) +
facet_wrap(~ sector) +
geom_line(size = 1)  +
labs(title = "Worker-lost day strike by sector and legality (1980-2018)",
x="Year",
y = "Worker-lost day strike",
caption = "") + theme(legend.position="bottom") +
scale_color_manual(name="",values = c("1"="#e42829","2"="#0c4b8f"),
labels = c("Legal","Extralegal"))
options(scipen = 999)
# Tradicional -----------
ohl %>% filter(!is.na(sector), sector %in% c("A Agriculture",
"B Mining",
"C Manufacturing industry",
"D-E Electricity, Water and Sanitary Services",
"F Construction",
"H-J Transportation and Communication")) %>%
group_by(sector,leg, yr) %>%
summarise(dhtp = sum(dhtp, na.rm = T)) %>%
ggplot(aes( x = yr, y =dhtp, fill = leg, color = leg)) +
facet_wrap(~ sector) +
geom_line(size = 1)  +
labs(title = "Worker-lost day strike by sector and legality (1980-2018)",
x="Year",
y = "Worker-lost day strike",
caption = "") + theme(legend.position="bottom") +
scale_color_manual(name="",values = c("1"="#e42829","2"="#0c4b8f"),
labels = c("Legal","Extralegal"))
# worker-lostday ----------------------------------------------------------
theme_set(theme(axis.text = element_text(size = 20),
axis.ticks = element_text(size= 20)) +
theme_classic())
# Tradicional -----------
ohl %>% filter(!is.na(sector), sector %in% c("A Agriculture",
"B Mining",
"C Manufacturing industry",
"D-E Electricity, Water and Sanitary Services",
"F Construction",
"H-J Transportation and Communication")) %>%
group_by(sector,leg, yr) %>%
summarise(dhtp = sum(dhtp, na.rm = T)) %>%
ggplot(aes( x = yr, y =dhtp, fill = leg, color = leg)) +
facet_wrap(~ sector) +
geom_line(size = 1)  +
labs(title = "Worker-lost day strike by sector and legality (1980-2018)",
x="Year",
y = "Worker-lost day strike",
caption = "") + theme(legend.position="bottom") +
scale_color_manual(name="",values = c("1"="#e42829","2"="#0c4b8f"),
labels = c("Legal","Extralegal"))
# worker-lostday ----------------------------------------------------------
theme_set(theme(axis.text = element_text(size = 20),
axis.ticks = element_text(size= 20),
legend.position="bottom") +
theme_classic())
# Tradicional -----------
ohl %>% filter(!is.na(sector), sector %in% c("A Agriculture",
"B Mining",
"C Manufacturing industry",
"D-E Electricity, Water and Sanitary Services",
"F Construction",
"H-J Transportation and Communication")) %>%
group_by(sector,leg, yr) %>%
summarise(dhtp = sum(dhtp, na.rm = T)) %>%
ggplot(aes( x = yr, y =dhtp, fill = leg, color = leg)) +
facet_wrap(~ sector) +
geom_line(size = 1)  +
labs(title = "Worker-lost day strike by sector and legality (1980-2018)",
x="Year",
y = "Worker-lost day strike",
caption = "")  +
scale_color_manual(name="",values = c("1"="#e42829","2"="#0c4b8f"),
labels = c("Legal","Extralegal"))
# worker-lostday ----------------------------------------------------------
theme_set(theme_classic() + theme(axis.text = element_text(size = 20),
axis.ticks = element_text(size= 20),
legend.position="bottom"))
# worker-lostday ----------------------------------------------------------
theme_set(theme_classic() + theme(axis.text = element_text(size = 20),
legend.position="bottom"))
# Tradicional -----------
ohl %>% filter(!is.na(sector), sector %in% c("A Agriculture",
"B Mining",
"C Manufacturing industry",
"D-E Electricity, Water and Sanitary Services",
"F Construction",
"H-J Transportation and Communication")) %>%
group_by(sector,leg, yr) %>%
summarise(dhtp = sum(dhtp, na.rm = T)) %>%
ggplot(aes( x = yr, y =dhtp, fill = leg, color = leg)) +
facet_wrap(~ sector) +
geom_line(size = 1)  +
labs(title = "Worker-lost day strike by sector and legality (1980-2018)",
x="Year",
y = "Worker-lost day strike",
caption = "")  +
scale_color_manual(name="",values = c("1"="#e42829","2"="#0c4b8f"),
labels = c("Legal","Extralegal"))
# worker-lostday ----------------------------------------------------------
theme_set(theme_classic() + theme(axis.text = element_text(size = 15),
legend.position="bottom"))
# Tradicional -----------
ohl %>% filter(!is.na(sector), sector %in% c("A Agriculture",
"B Mining",
"C Manufacturing industry",
"D-E Electricity, Water and Sanitary Services",
"F Construction",
"H-J Transportation and Communication")) %>%
group_by(sector,leg, yr) %>%
summarise(dhtp = sum(dhtp, na.rm = T)) %>%
ggplot(aes( x = yr, y =dhtp, fill = leg, color = leg)) +
facet_wrap(~ sector) +
geom_line(size = 1)  +
labs(title = "Worker-lost day strike by sector and legality (1980-2018)",
x="Year",
y = "Worker-lost day strike",
caption = "")  +
scale_color_manual(name="",values = c("1"="#e42829","2"="#0c4b8f"),
labels = c("Legal","Extralegal"))
# worker-lostday ----------------------------------------------------------
theme_set(theme_classic() + theme(text = element_text(size = 14),
legend.position="bottom"))
# Tradicional -----------
ohl %>% filter(!is.na(sector), sector %in% c("A Agriculture",
"B Mining",
"C Manufacturing industry",
"D-E Electricity, Water and Sanitary Services",
"F Construction",
"H-J Transportation and Communication")) %>%
group_by(sector,leg, yr) %>%
summarise(dhtp = sum(dhtp, na.rm = T)) %>%
ggplot(aes( x = yr, y =dhtp, fill = leg, color = leg)) +
facet_wrap(~ sector) +
geom_line(size = 1)  +
labs(title = "Worker-lost day strike by sector and legality (1980-2018)",
x="Year",
y = "Worker-lost day strike",
caption = "")  +
scale_color_manual(name="",values = c("1"="#e42829","2"="#0c4b8f"),
labels = c("Legal","Extralegal"))
# Tradicional -----------
ohl %>% filter(!is.na(sector), sector %in% c("A Agriculture",
"B Mining",
"C Manufacturing industry",
"D-E Electricity, Water and Sanitary Services",
"F Construction",
"H-J Transportation and Communication")) %>%
group_by(sector,leg, yr) %>%
summarise(dhtp = sum(dhtp, na.rm = T)) %>%
ggplot(aes( x = yr, y =dhtp, fill = leg, color = leg)) +
facet_wrap(~ sector) +
geom_line(size = 1)  +
labs(title = "Worker-lost day strike by sector and legality (1980-2018)",
x="Year",
y = "Worker-lost day strike",
caption = "")  +
scale_colour_grey(name = "", labels = c("Legal","Extralegal"))
# Tradicional -----------
ohl %>% filter(!is.na(sector), sector %in% c("A Agriculture",
"B Mining",
"C Manufacturing industry",
"D-E Electricity, Water and Sanitary Services",
"F Construction",
"H-J Transportation and Communication")) %>%
group_by(sector,leg, yr) %>%
summarise(dhtp = sum(dhtp, na.rm = T)) %>%
ggplot(aes( x = yr, y =dhtp, fill = leg, color = leg)) +
facet_wrap(~ sector) +
geom_line(size = 1)  +
labs(title = "Worker-lost day strike by sector and legality (1980-2018)",
x="Year",
y = "Worker-lost day strike",
caption = "")  +
scale_colour_grey2(name = "", labels = c("Legal","Extralegal"))
# Tradicional -----------
ohl %>% filter(!is.na(sector), sector %in% c("A Agriculture",
"B Mining",
"C Manufacturing industry",
"D-E Electricity, Water and Sanitary Services",
"F Construction",
"H-J Transportation and Communication")) %>%
group_by(sector,leg, yr) %>%
summarise(dhtp = sum(dhtp, na.rm = T)) %>%
ggplot(aes( x = yr, y =dhtp, fill = leg, color = leg)) +
facet_wrap(~ sector) +
geom_line(size = 1)  +
labs(title = "Worker-lost day strike by sector and legality (1980-2018)",
x="Year",
y = "Worker-lost day strike",
caption = "")  +
scale_color_manual(name="",values = c("1"="blue","2"="red"),
labels = c("Legal","Extralegal"))
# Tradicional -----------
ohl %>% filter(!is.na(sector), sector %in% c("A Agriculture",
"B Mining",
"C Manufacturing industry",
"D-E Electricity, Water and Sanitary Services",
"F Construction",
"H-J Transportation and Communication")) %>%
group_by(sector,leg, yr) %>%
summarise(dhtp = sum(dhtp, na.rm = T)) %>%
ggplot(aes( x = yr, y =dhtp, fill = leg, color = leg)) +
facet_wrap(~ sector) +
geom_line(size = 1)  +
labs(title = "Worker-lost day strike by sector and legality (1980-2018)",
x="Year",
y = "Worker-lost day strike",
caption = "")  +
scale_color_manual(name="",values = c("1"="darkblue","2"="brown1"),
labels = c("Legal","Extralegal"))
ggsave(plot = last_plot(),
filename = "../Output/graph/worker-lostday-tradicional.png",
device = "png",
dpi = "retina",
units = "cm",
width = 33,
height = 20)
# Services --------------
# N y M sin n
ohl %>% filter(!is.na(sector), sector %in% c("G-I Commerce",
"L-K Banks and Financial Services",
"Q Health (private, public and municipalized)",
"Q Social and Personal Services")) %>%
group_by(sector,leg, yr) %>%
summarise(dhtp = sum(dhtp, na.rm = T)) %>%
ggplot(aes( x = yr, y =dhtp, fill = leg, color = leg)) +
facet_wrap(~ sector) +
geom_line(size = 1)  +
labs(title = "Worker-lost day strike by sector and legality (1980-2018)",
x="Year",
y = "Worker-lost day strike",
caption = "") + theme(legend.position="bottom") +
scale_color_manual(name="",values = c("1"="#e42829","2"="#0c4b8f"),
labels = c("Legal","Extralegal"))
ggsave(plot = last_plot(),
filename = "../Output/graph/worker-lostday-services.png",
device = "png",
dpi = "retina",
units = "cm",
width = 33,
height = 20)
ggsave(plot = last_plot(),
filename = "../Output/graph/worker-lostday-services.png",
device = "png",
dpi = "retina",
units = "cm",
width = 33,
height = 20)
